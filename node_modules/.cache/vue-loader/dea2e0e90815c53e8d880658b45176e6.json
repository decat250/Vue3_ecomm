{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/Test.vue?vue&type=template&id=5b2d5ecc&ts=true","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/Test.vue","mtime":1645280698216},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1644997290174},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1644997287108},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1644997290172}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iZmlsZS11cGxvYWQiPgogICAgPGRpdiBjbGFzcz0idXBsb2FkLWFyZWEiIEBjbGljaz0idHJpZ2dlclVwbG9hZCI+PC9kaXY+CiAgICA8c3BhbiB2LWlmPSJmaWxlU3RhdHVzPT09J2xvYWRpbmcnIj7mraPlnKjkuIrlgrM8L3NwYW4+CiAgICA8c3BhbiB2LWVsc2UtaWY9ImZpbGVTdGF0dXM9PT0nc3VjY2VzcyciPuS4iuWCs+aIkOWKnzwvc3Bhbj4KICAgIDxzcGFuIHYtZWxzZS1pZj0iZmlsZVN0YXR1cz09PSdlcnJvciciPuS4iuWCs+WkseaVlzwvc3Bhbj4KICAgIDxzcGFuIHYtZWxzZT7pu57pgbjkuIrlgrM8L3NwYW4+CiAgICA8aW5wdXQgcmVmPSJmaWxlSW5wdXQiIHR5cGU9ImZpbGUiIG5hbWU9ImZpbGUiIHN0eWxlPSJkaXNwbGF5OiBub25lIiAvPgogIDwvZGl2Pgo="},{"version":3,"sources":["/Users/decat/Vue3_ecomm/src/views/Test.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnD,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjD,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACxE,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/decat/Vue3_ecomm/src/views/Test.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"file-upload\">\n    <div class=\"upload-area\" @click=\"triggerUpload\"></div>\n    <span v-if=\"fileStatus==='loading'\">正在上傳</span>\n    <span v-else-if=\"fileStatus==='success'\">上傳成功</span>\n    <span v-else-if=\"fileStatus==='error'\">上傳失敗</span>\n    <span v-else>點選上傳</span>\n    <input ref=\"fileInput\" type=\"file\" name=\"file\" style=\"display: none\" />\n  </div>\n</template>\n<script lang=\"ts\">\n    import { computed,defineComponent,PropType,reactive,ref } from 'vue'\n    import axios from 'axios'\n    type UploadStatus = 'ready' | 'loading' | 'success' | 'error'\n    export default defineComponent({\n        props: {\n            action: { // url地址\n                type: String,required: true\n            }\n        },setup(props) {\n            // input例項物件，通過與ref=\"fileInput\"的關聯獲取到input例項物件\n            const fileInput = ref<null | HTMLInputElement>(null)\n            const fileStatus = ref<UploadStatus>('ready')\n            \n            // 1.div點選事件\n            const triggerUpload = () => {\n                if(fileInput.value) {\n                    fileInput.value.click()\n                }\n            }\n            // 通過div來觸發input的change事件\n            const handleFileChange = (e: Event) => {\n              const target = e.target as HTMLInputElement\n              const files = target.files\n              if(files) {\n                const uploadedFile = files[0]\n                const formData = new FormData()\n                formData.append('file',uploadedFile)\n                readyFile.status = 'loading' // 上傳之前將狀態設定為loading\n                axios.post(props.actions,{\n                  headers: {\n                    \"Content-Type\": 'multipart/form-data'\n                  }\n                }).then(resp=> {\n                  console.log('resp',resp)\n                  readyFile.status = 'success' // 上傳成功將狀態設定為success\n                }).catch(error=> {\n                readyFile.status = 'error' // // 上傳失敗將狀態設定為error\n                })\n              }\n            }\n            return {\n                fileInput,triggerUpload,handleFileChange,fileStatus\n            }\n\n        }\n    })\n</script>\n"]}]}