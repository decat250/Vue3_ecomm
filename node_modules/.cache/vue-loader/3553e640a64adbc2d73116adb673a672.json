{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/Login.vue?vue&type=style&index=0&id=64b48a0c&scoped=true&lang=css","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/Login.vue","mtime":1646129253666},{"path":"/Users/decat/Vue3_ecomm/node_modules/css-loader/dist/cjs.js","mtime":1645696104439},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1645696107320},{"path":"/Users/decat/Vue3_ecomm/node_modules/postcss-loader/src/index.js","mtime":1645696106356},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci52ZXJ0aWNhbC1jZW50ZXIgewogIG1pbi1oZWlnaHQ6IDEwMCU7IC8qIEZhbGxiYWNrIGZvciBicm93c2VycyBkbyBOT1Qgc3VwcG9ydCB2aCB1bml0ICovCiAgbWluLWhlaWdodDogMTAwdmg7IC8qIFRoZXNlIHR3byBsaW5lcyBhcmUgY291bnRlZCBhcyBvbmUgOi0pICAgICAgICovCgogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQo="},{"version":3,"sources":["/Users/decat/Vue3_ecomm/src/views/adm/Login.vue"],"names":[],"mappings":";AAqIA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;EACnE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC;;EAEpE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrB","file":"/Users/decat/Vue3_ecomm/src/views/adm/Login.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"jumbotron vertical-center\">\n    <div class=\"container\">\n      <n-card title=\"管理者登入\">\n        <n-form :model=\"loginformValue\" ref=\"loginformref\" :rules=\"rules\">\n          <n-form-item path=\"account\" label=\"帳號\">\n            <n-input\n              v-model:value=\"loginformValue.account\"\n              placeholder=\"請輸入帳號\"\n              clearable\n            />\n          </n-form-item>\n\n          <n-form-item path=\"password\" label=\"密碼\">\n            <n-input\n              v-model:value=\"loginformValue.password\"\n              placeholder=\"請輸入密碼\"\n              @keyup.enter=\"login\"\n              type=\"password\"\n              clearable\n            />\n          </n-form-item>\n        </n-form>\n        <n-button type=\"primary\" block secondary strong v-on:click=\"login\"\n          >登入\n        </n-button>\n      </n-card>\n    </div>\n  </div>\n</template>\n<script>\nimport { defineComponent, ref } from \"vue\";\nimport { useMessage } from \"naive-ui\";\n\nexport default defineComponent({\n  name: \"header\",\n  components: {},\n  data() {\n    return {\n      islogin: false,\n\n      loginformValue: ref({\n        account: \"\",\n        password: \"\",\n      }),\n\n      rules: {\n        account: [\n          {\n            required: true,\n            message: \"這是必填欄位\",\n            trigger: [\"input\", \"blur\"],\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"這是必填欄位\",\n            trigger: [\"input\", \"blur\"],\n          },\n        ],\n      },\n    };\n  },\n  mounted() {\n    const isLogin = localStorage.getItem(\"account\");\n\n    if (isLogin != null) {\n      this.islogin = true;\n      this.account = localStorage.getItem(\"account\");\n    } else {\n      this.islogin = false;\n    }\n  },\n  setup() {\n    window.$message = useMessage();\n\n    const loginformref = ref(null); //登入表單\n\n    return {\n      loginformref,\n      showLoginModal: ref(false),\n    };\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"account\");\n      this.islogin = false;\n      window.$message.success(\"您已登出\");\n    },\n    login() {\n      this.loginformref.validate((valid) => {\n        if (!valid) {\n          fetch(\"http://127.0.0.1/api/signin\", {\n            method: \"post\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              account: this.loginformValue.account,\n              password: this.loginformValue.password,\n            }),\n          })\n            .then((data) => {\n              return data.json();\n            })\n            .then((ret) => {\n              if (ret.Status == \"Success\") {\n                console.log(ret)\n                this.$router.push({ path: '/admindex'})\n                this.showLoginModal = false;\n                this.islogin = true;\n                localStorage.setItem(\"account\", ret.data[0]);\n                \n                window.$message.success(ret.Message);\n                this.loginformValue.account = \"\";\n                this.loginformValue.password = \"\";\n              } else {\n                window.$message.error(ret.Message);\n              }\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n  },\n});\n</script>\n\n\n<style scoped>\n.vertical-center {\n  min-height: 100%; /* Fallback for browsers do NOT support vh unit */\n  min-height: 100vh; /* These two lines are counted as one :-)       */\n\n  display: flex;\n  align-items: center;\n}\n</style>"]}]}