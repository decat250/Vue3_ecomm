{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/orderadm.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/orderadm.vue","mtime":1648793905724},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgdXNlTWVzc2FnZSB9IGZyb20gIm5haXZlLXVpIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgVnVlR29vZFRhYmxlIH0gZnJvbSAidnVlLWdvb2QtdGFibGUtbmV4dCI7CmltcG9ydCAidnVlLWdvb2QtdGFibGUtbmV4dC9kaXN0L3Z1ZS1nb29kLXRhYmxlLW5leHQuY3NzIjsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBWdWVHb29kVGFibGU6IFZ1ZUdvb2RUYWJsZQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgd2luZG93LiRtZXNzYWdlID0gdXNlTWVzc2FnZSgpOwogICAgcmV0dXJuIHt9OwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbHVtbnM6IFt7CiAgICAgICAgbGFiZWw6ICLoqILllq7ml6XmnJ8iLAogICAgICAgIGZpZWxkOiAib3JkZXJfdGltZSIsCiAgICAgICAgZGF0ZUlucHV0Rm9ybWF0OiAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU1NTU1hYWCIsCiAgICAgICAgZGF0ZU91dHB1dEZvcm1hdDogInl5eXkiLAogICAgICAgIGdsb2JhbFNlYXJjaERpc2FibGVkOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIuioguizvOS6uuWnk+WQjSIsCiAgICAgICAgZmllbGQ6ICJ1c2VyX25hbWUiLAogICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgZ2xvYmFsU2VhcmNoRGlzYWJsZWQ6IHRydWUKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAi57i96YeR6aGNIiwKICAgICAgICBmaWVsZDogIm9yZGVyX3RvdGFsIiwKICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICB0ZENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgIGdsb2JhbFNlYXJjaERpc2FibGVkOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIuioguWWrueLgOaFiyIsCiAgICAgICAgZmllbGQ6ICJvcmRlcl9zdGF0dXMiLAogICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgZ2xvYmFsU2VhcmNoRGlzYWJsZWQ6IHRydWUKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAi5Ye66LKo54uA5oWLIiwKICAgICAgICBmaWVsZDogImxvZ2lzdGljcyIsCiAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICBnbG9iYWxTZWFyY2hEaXNhYmxlZDogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICLoqbPntLDos4foqIoiLAogICAgICAgIGZpZWxkOiAiZWRpdCIsCiAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICBnbG9iYWxTZWFyY2hEaXNhYmxlZDogdHJ1ZQogICAgICB9XSwKICAgICAgcm93czogW10sCiAgICAgIHN0YXR1c19vcHRpb25zOiBbewogICAgICAgIHZhbHVlOiAi5b6F5LuY5qy+IiwKICAgICAgICBsYWJlbDogIuW+heS7mOasviIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAi5bey5LuY5qy+IiwKICAgICAgICBsYWJlbDogIuW3suS7mOasviIKICAgICAgfV0sCiAgICAgIGxvZ2lzdGljc19zdGF0ZV9vcHRpb25zOiBbewogICAgICAgIHZhbHVlOiAi5b6F5Ye66LKoIiwKICAgICAgICBsYWJlbDogIuW+heWHuuiyqCIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAi5bey5Ye66LKoIiwKICAgICAgICBsYWJlbDogIuW3suWHuuiyqCIKICAgICAgfV0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3QvYXBpL2dldG9yZGVyYWRtIiwge30pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy5yb3dzID0gcmVzLmRhdGEuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgb3JkZXJfc3RhdHVzOiBmdW5jdGlvbiBvcmRlcl9zdGF0dXMoaWQsIHN0YXR1cykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgY29uc29sZS5sb2coc3RhdHVzKTsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgib3JkZXJfaWQiLCBpZCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgic3RhdHVzIiwgc3RhdHVzKTsKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdC9hcGkvb3JkZXJzdGF0dXNfdXBkYXRlIiwgZm9ybURhdGEsIHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuU3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgd2luZG93LiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEuTWVzc2FnZSk7CiAgICAgICAgICBfdGhpczIuc2hvd0RlbGV0ZU1vZGFsUmVmID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2dpc3RpY3Nfc3RhdGU6IGZ1bmN0aW9uIGxvZ2lzdGljc19zdGF0ZShpZCwgc3RhdHVzKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgib3JkZXJfaWQiLCBpZCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgic3RhdHVzIiwgc3RhdHVzKTsKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdC9hcGkvbG9naXN0aWNzX3VwZGF0ZSIsIGZvcm1EYXRhLCB7fSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLlN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgIHdpbmRvdy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLk1lc3NhZ2UpOwogICAgICAgICAgX3RoaXMzLnNob3dEZWxldGVNb2RhbFJlZiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVkaXJlY3Q6IGZ1bmN0aW9uIHJlZGlyZWN0KGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL2FkbWluZGV4L29yZGVyX2l0ZW1hZG0vIiArIGlkCiAgICAgIH0pOwogICAgfQogIH0KfSk7"},{"version":3,"mappings":"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","names":["axios","useMessage","defineComponent","VueGoodTable","components","setup","window","$message","data","columns","label","field","dateInputFormat","dateOutputFormat","globalSearchDisabled","tdClass","type","rows","status_options","value","logistics_state_options","mounted","get","then","res","methods","order_status","id","status","console","log","formData","FormData","append","post","Status","success","Message","showDeleteModalRef","logistics_state","redirect","$router","push","path"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/adm/orderadm.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <vue-good-table\n      ref=\"my-table\"\n      :search-options=\"{ enabled: true }\"\n      :columns=\"columns\"\n      :rows=\"rows\"\n      :paginate=\"true\"\n      :lineNumbers=\"true\"\n      :globalSearch=\"true\"\n      :pagination-options=\"{\n        enabled: true,\n        mode: 'records',\n        perPage: 20,\n        position: 'top',\n        perPageDropdown: [5, 10, 20],\n        dropdownAllowAll: false,\n        setCurrentPage: 2,\n        jumpFirstOrLast: true,\n        firstLabel: '第一頁',\n        lastLabel: '最後一頁',\n        nextLabel: '下一頁',\n        prevLabel: '上一頁',\n        rowsPerPageLabel: '每頁顯示項目',\n        ofLabel: 'of',\n        pageLabel: 'page',\n        allLabel: 'All',\n        infoFn: (params) => `目前頁數 ${params.firstRecordOnPage}`,\n      }\"\n      @on-selected-rows-change=\"selectionChanged\"\n      :select-options=\"{\n        enabled: true,\n      }\"\n    >\n      <template #table-row=\"props\">\n        <span v-if=\"props.column.field == 'order_status'\">\n          <n-select\n            v-model:value=\"props.row.status\"\n            :options=\"status_options\"\n            @update:value=\"order_status(props.row.order_id, props.row.status)\"\n          />\n        </span>\n        <span v-if=\"props.column.field == 'logistics'\">\n          <n-select\n            v-model:value=\"props.row.logistics_state\"\n            :options=\"logistics_state_options\"\n            @update:value=\"\n              logistics_state(props.row.order_id, props.row.logistics_state)\n            \"\n          />\n        </span>\n        <span v-if=\"props.column.field == 'edit'\">\n          <n-button type=\"primary\" @click=\"redirect(props.row.order_id)\">\n            訂單資訊\n          </n-button>\n        </span>\n\n        <span v-else>\n          {{ props.formattedRow[props.column.field] }}\n        </span>\n      </template>\n    </vue-good-table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { useMessage } from \"naive-ui\";\n\nimport { defineComponent } from \"vue\";\nimport { VueGoodTable } from \"vue-good-table-next\";\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\n\nexport default defineComponent({\n  components: { VueGoodTable },\n\n  setup() {\n    window.$message = useMessage();\n    return {};\n  },\n  data() {\n    return {\n      columns: [\n        {\n          label: \"訂單日期\",\n          field: \"order_time\",\n          dateInputFormat: \"yyyy-MM-dd'T'HH:mm:ss.SSSSSSXXX\",\n          dateOutputFormat: \"yyyy\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"訂購人姓名\",\n          field: \"user_name\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"總金額\",\n          field: \"order_total\",\n          type: \"number\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"訂單狀態\",\n          field: \"order_status\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"出貨狀態\",\n          field: \"logistics\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"詳細資訊\",\n          field: \"edit\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n      ],\n      rows: [],\n      status_options: [\n        { value: \"待付款\", label: \"待付款\" },\n        { value: \"已付款\", label: \"已付款\" },\n      ],\n      logistics_state_options: [\n        { value: \"待出貨\", label: \"待出貨\" },\n        { value: \"已出貨\", label: \"已出貨\" },\n      ],\n    };\n  },\n  mounted() {\n    axios.get(\"http://localhost/api/getorderadm\", {}).then((res) => {\n      this.rows = res.data.data;\n    });\n  },\n  methods: {\n    order_status(id, status) {\n      console.log(id);\n      console.log(status);\n      const formData = new FormData();\n      formData.append(\"order_id\", id);\n      formData.append(\"status\", status);\n\n      axios\n        .post(\"http://localhost/api/orderstatus_update\", formData, {})\n        .then((res) => {\n          if (res.data.Status == \"Success\") {\n            window.$message.success(res.data.Message);\n\n            this.showDeleteModalRef = false;\n          }\n        });\n    },\n    logistics_state(id, status) {\n      const formData = new FormData();\n      formData.append(\"order_id\", id);\n      formData.append(\"status\", status);\n\n      axios\n        .post(\"http://localhost/api/logistics_update\", formData, {})\n        .then((res) => {\n          if (res.data.Status == \"Success\") {\n            window.$message.success(res.data.Message);\n\n            this.showDeleteModalRef = false;\n          }\n        });\n    },\n    redirect(id) {\n      this.$router.push({ path: \"/admindex/order_itemadm/\" + id });\n    },\n  },\n});\n</script>"]}]}