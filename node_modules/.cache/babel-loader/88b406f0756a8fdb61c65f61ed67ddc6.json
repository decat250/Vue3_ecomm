{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/Shopcart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/Shopcart.vue","mtime":1645794416819},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgImJvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzcyI7CmltcG9ydCAianF1ZXJ5L2Rpc3QvanF1ZXJ5Lm1pbi5qcyI7CmltcG9ydCAiZGF0YXRhYmxlcy5uZXQtZHQvanMvZGF0YVRhYmxlcy5kYXRhVGFibGVzIjsKaW1wb3J0ICJkYXRhdGFibGVzLm5ldC1kdC9jc3MvanF1ZXJ5LmRhdGFUYWJsZXMubWluLmNzcyI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0RlbGV0ZU1vZGFsUmVmOiByZWYoZmFsc2UpCiAgICB9OwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFtb3VudDogMCwKICAgICAgaXRlbTogIiIKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHByb3h5ID0gdGhpczsKICAgIHRoaXMucmVmcmVzaG1vdW50KCk7CiAgICB2YXIgdGFibGUgPSAkKCIjZXhhbXBsZSIpLkRhdGFUYWJsZSh7CiAgICAgIGFqYXg6ICJodHRwOi8vbG9jYWxob3N0L2FwaS9nZXRzaG9wY2FydC8iICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkIiksCiAgICAgIGNvbHVtbkRlZnM6IFt7CiAgICAgICAgdGFyZ2V0czogWzBdLAogICAgICAgIHZpc2libGU6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICB0YXJnZXRzOiBbMV0KICAgICAgfSwgewogICAgICAgIHRhcmdldHM6IFsyXQogICAgICB9LCB7CiAgICAgICAgdGFyZ2V0czogWzVdLAogICAgICAgIGRlZmF1bHRDb250ZW50OiAiPGJ1dHRvbiBpZD0nZGVsJz7liKrpmaQ8L2J1dHRvbj4iCiAgICAgIH1dCiAgICB9KTsKICAgICQoIiNleGFtcGxlIHRib2R5Iikub24oImNsaWNrIiwgImJ1dHRvbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGRhdGEgPSB0YWJsZS5yb3coJCh0aGlzKS5wYXJlbnRzKCJ0ciIpKS5kYXRhKCk7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZWxldGVidG4iKS5jbGljaygpOwogICAgICBwcm94eS5lZGl0aWQgPSBkYXRhWzBdOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblBvc2l0aXZlQ2xpY2s6IGZ1bmN0aW9uIG9uUG9zaXRpdmVDbGljaygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImRlbGV0ZWlkIiwgdGhpcy5lZGl0aWQpOwogICAgICBheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0L2FwaS9kZWxjYXJ0IiwgZm9ybURhdGEsIHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuU3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgd2luZG93LiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEuTWVzc2FnZSk7CiAgICAgICAgICAkKCIjZXhhbXBsZSIpLkRhdGFUYWJsZSgpLmFqYXgucmVsb2FkKCk7CgogICAgICAgICAgX3RoaXMucmVmcmVzaG1vdW50KCk7CgogICAgICAgICAgX3RoaXMuc2hvd0RlbGV0ZU1vZGFsUmVmID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbk5lZ2F0aXZlQ2xpY2s6IGZ1bmN0aW9uIG9uTmVnYXRpdmVDbGljaygpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5hbW91bnQpOwogICAgICB0aGlzLnNob3dEZWxldGVNb2RhbFJlZiA9IGZhbHNlOwogICAgfSwKICAgIHJlZnJlc2htb3VudDogZnVuY3Rpb24gcmVmcmVzaG1vdW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYW1vdW50ID0gMDsKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0L2FwaS9nZXRzaG9wY2FydC8iICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkIiksIHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIF90aGlzMi5hbW91bnQgKz0gcmVzLmRhdGEuZGF0YVtpXVszXSAqIHJlcy5kYXRhLmRhdGFbaV1bNF07CiAgICAgICAgICBfdGhpczIuaXRlbSArPSByZXMuZGF0YS5kYXRhW2ldWzFdICsgIngiICsgcmVzLmRhdGEuZGF0YVtpXVs0XSArICIjIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrb3V0OiBmdW5jdGlvbiBjaGVja291dCgpIHsKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0L2FwaS9wYXkiOwogICAgICB2YXIgZm9ybSA9ICQoJzxmb3JtIHN0eWxlPSJkaXNwbGF5Om5vbmUiIGFjdGlvbj0iJyArIHVybCArICciIG1ldGhvZD0icG9zdCI+JyArICc8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iVG90YWxBbW91bnQiIHZhbHVlPSInICsgdGhpcy5hbW91bnQgKyAnIiAvPicgKyAnPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Ikl0ZW1OYW1lIiB2YWx1ZT0iJyArIHRoaXMuaXRlbSArICciIC8+JyArICI8L2Zvcm0+Iik7CiAgICAgICQoImJvZHkiKS5hcHBlbmQoZm9ybSk7CiAgICAgIGZvcm0uc3VibWl0KCk7CiAgICB9CiAgfQp9KTs="},{"version":3,"mappings":"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","names":["defineComponent","ref","axios","$","setup","showDeleteModalRef","data","amount","item","mounted","proxy","refreshmount","table","DataTable","ajax","localStorage","getItem","columnDefs","targets","visible","defaultContent","on","row","parents","document","getElementById","click","editid","methods","onPositiveClick","formData","FormData","append","post","then","res","Status","window","$message","success","Message","reload","onNegativeClick","console","log","get","i","length","checkout","url","form","submit"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/Shopcart.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    購物車商品\n    <div class=\"row\">\n      <table class=\"table table-hover table-bordered\" id=\"example\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>名稱</th>\n            <th>規格</th>\n            <th>單價</th>\n            <th>數量</th>\n\n            <th>操作</th>\n          </tr>\n        </thead>\n        <tbody></tbody>\n      </table>\n    </div>\n    訂單總金額：{{ amount\n    }}<n-card title=\"\">\n      <n-button type=\"primary\" v-on:click=\"checkout\"> 前往結賬 </n-button>\n    </n-card>\n  </div>\n  <n-modal\n    v-model:show=\"showDeleteModalRef\"\n    :mask-closable=\"false\"\n    preset=\"dialog\"\n    title=\"確認視窗\"\n    content=\"您確定要刪除嗎?\"\n    positive-text=\"確定刪除\"\n    negative-text=\"取消\"\n    @positive-click=\"onPositiveClick\"\n    @negative-click=\"onNegativeClick\"\n    transform-origin=\"center\"\n  />\n  <n-button\n    id=\"deletebtn\"\n    style=\"display: None\"\n    @click=\"showDeleteModalRef = true\"\n    >123</n-button\n  >\n</template>\n<style>\n.testimonial-group > .row {\n  display: block;\n  overflow-x: auto;\n  white-space: nowrap;\n}\n.testimonial-group > .row > .col-4 {\n  display: inline-block;\n}\n\n.vertical-center {\n  min-height: 100%; /* Fallback for browsers do NOT support vh unit */\n\n  display: flex;\n  align-items: center;\n}\n</style>\n<script>\nimport { defineComponent, ref } from \"vue\";\nimport axios from \"axios\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"jquery/dist/jquery.min.js\";\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport $ from \"jquery\";\nexport default defineComponent({\n  setup() {\n    return {\n      showDeleteModalRef: ref(false),\n    };\n  },\n  data() {\n    return {\n      amount: 0,\n      item: \"\",\n    };\n  },\n  mounted() {\n    let proxy = this;\n    this.refreshmount();\n    var table = $(\"#example\").DataTable({\n      ajax: \"http://localhost/api/getshopcart/\" + localStorage.getItem(\"id\"),\n      columnDefs: [\n        {\n          targets: [0],\n          visible: false,\n        },\n        {\n          targets: [1],\n        },\n        {\n          targets: [2],\n        },\n\n        {\n          targets: [5],\n          defaultContent: \"<button id='del'>刪除</button>\",\n        },\n      ],\n    });\n    $(\"#example tbody\").on(\"click\", \"button\", function () {\n      var data = table.row($(this).parents(\"tr\")).data();\n      document.getElementById(\"deletebtn\").click();\n      proxy.editid = data[0];\n    });\n  },\n  methods: {\n    onPositiveClick() {\n      const formData = new FormData();\n      formData.append(\"deleteid\", this.editid);\n      axios.post(\"http://localhost/api/delcart\", formData, {}).then((res) => {\n        if (res.data.Status == \"Success\") {\n          window.$message.success(res.data.Message);\n          $(\"#example\").DataTable().ajax.reload();\n          this.refreshmount();\n          this.showDeleteModalRef = false;\n        }\n      });\n    },\n    onNegativeClick() {\n      console.log(this.amount);\n\n      this.showDeleteModalRef = false;\n    },\n    refreshmount() {\n      this.amount = 0;\n      axios\n        .get(\n          \"http://localhost/api/getshopcart/\" + localStorage.getItem(\"id\"),\n          {}\n        )\n        .then((res) => {\n          for (var i = 0; i < res.data.data.length; i++) {\n            this.amount += res.data.data[i][3] * res.data.data[i][4];\n            this.item += res.data.data[i][1] + \"x\" + res.data.data[i][4] + \"#\";\n          }\n        });\n    },\n    checkout() {\n      \n\n      var url = \"http://localhost/api/pay\";\n      var form = $(\n        '<form style=\"display:none\" action=\"' +\n          url +\n          '\" method=\"post\">' +\n          '<input type=\"text\" name=\"TotalAmount\" value=\"' +\n          this.amount +\n          '\" />' +\n          '<input type=\"text\" name=\"ItemName\" value=\"' +\n          this.item +\n          '\" />' +\n          \"</form>\"\n      );\n\n      $(\"body\").append(form);\n      form.submit();\n    },\n  },\n});\n</script>\n"]}]}