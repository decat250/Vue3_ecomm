{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/Shopcart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/Shopcart.vue","mtime":1646119492735},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgImJvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzcyI7CmltcG9ydCAianF1ZXJ5L2Rpc3QvanF1ZXJ5Lm1pbi5qcyI7CmltcG9ydCAiZGF0YXRhYmxlcy5uZXQtZHQvanMvZGF0YVRhYmxlcy5kYXRhVGFibGVzIjsKaW1wb3J0ICJkYXRhdGFibGVzLm5ldC1kdC9jc3MvanF1ZXJ5LmRhdGFUYWJsZXMubWluLmNzcyI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBUd0NpdHlTZWxlY3RvciBmcm9tICJ0dy1jaXR5LXNlbGVjdG9yIjsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RGVsZXRlTW9kYWxSZWY6IHJlZihmYWxzZSkKICAgIH07CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYW1vdW50OiAwLAogICAgICBpdGVtOiAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBuZXcgVHdDaXR5U2VsZWN0b3IoKTsKICAgIHZhciBwcm94eSA9IHRoaXM7CiAgICB0aGlzLnJlZnJlc2htb3VudCgpOwogICAgdmFyIHRhYmxlID0gJCgiI2V4YW1wbGUiKS5EYXRhVGFibGUoewogICAgICBhamF4OiAiaHR0cDovL2xvY2FsaG9zdC9hcGkvZ2V0c2hvcGNhcnQvIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpLAogICAgICBjb2x1bW5EZWZzOiBbewogICAgICAgIHRhcmdldHM6IFswXSwKICAgICAgICB2aXNpYmxlOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgdGFyZ2V0czogWzFdCiAgICAgIH0sIHsKICAgICAgICB0YXJnZXRzOiBbMl0KICAgICAgfSwgewogICAgICAgIHRhcmdldHM6IFs1XSwKICAgICAgICBkZWZhdWx0Q29udGVudDogIjxidXR0b24gaWQ9J2RlbCc+5Yiq6ZmkPC9idXR0b24+IgogICAgICB9XQogICAgfSk7CiAgICAkKCIjZXhhbXBsZSB0Ym9keSIpLm9uKCJjbGljayIsICJidXR0b24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkYXRhID0gdGFibGUucm93KCQodGhpcykucGFyZW50cygidHIiKSkuZGF0YSgpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGVsZXRlYnRuIikuY2xpY2soKTsKICAgICAgcHJveHkuZWRpdGlkID0gZGF0YVswXTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgb25Qb3NpdGl2ZUNsaWNrOiBmdW5jdGlvbiBvblBvc2l0aXZlQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJkZWxldGVpZCIsIHRoaXMuZWRpdGlkKTsKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdC9hcGkvZGVsY2FydCIsIGZvcm1EYXRhLCB7fSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLlN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgIHdpbmRvdy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLk1lc3NhZ2UpOwogICAgICAgICAgJCgiI2V4YW1wbGUiKS5EYXRhVGFibGUoKS5hamF4LnJlbG9hZCgpOwoKICAgICAgICAgIF90aGlzLnJlZnJlc2htb3VudCgpOwoKICAgICAgICAgIF90aGlzLnNob3dEZWxldGVNb2RhbFJlZiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgb25OZWdhdGl2ZUNsaWNrOiBmdW5jdGlvbiBvbk5lZ2F0aXZlQ2xpY2soKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYW1vdW50KTsKICAgICAgdGhpcy5zaG93RGVsZXRlTW9kYWxSZWYgPSBmYWxzZTsKICAgIH0sCiAgICByZWZyZXNobW91bnQ6IGZ1bmN0aW9uIHJlZnJlc2htb3VudCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmFtb3VudCA9IDA7CiAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdC9hcGkvZ2V0c2hvcGNhcnQvIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpLCB7fSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMuZGF0YS5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBfdGhpczIuYW1vdW50ICs9IHJlcy5kYXRhLmRhdGFbaV1bM10gKiByZXMuZGF0YS5kYXRhW2ldWzRdOwogICAgICAgICAgX3RoaXMyLml0ZW0gKz0gcmVzLmRhdGEuZGF0YVtpXVsxXSArICJ4IiArIHJlcy5kYXRhLmRhdGFbaV1bNF0gKyAiIyI7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGVja291dDogZnVuY3Rpb24gY2hlY2tvdXQoKSB7CiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdC9hcGkvcGF5IjsKICAgICAgdmFyIGZvcm0gPSAkKCc8Zm9ybSBzdHlsZT0iZGlzcGxheTpub25lIiBhY3Rpb249IicgKyB1cmwgKyAnIiBtZXRob2Q9InBvc3QiPicgKyAnPGlucHV0IHR5cGU9InRleHQiIG5hbWU9IlRvdGFsQW1vdW50IiB2YWx1ZT0iJyArIHRoaXMuYW1vdW50ICsgJyIgLz4nICsgJzxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJJdGVtTmFtZSIgdmFsdWU9IicgKyB0aGlzLml0ZW0gKyAnIiAvPicgKyAiPC9mb3JtPiIpOwogICAgICAkKCJib2R5IikuYXBwZW5kKGZvcm0pOwogICAgICBmb3JtLnN1Ym1pdCgpOwogICAgfQogIH0KfSk7"},{"version":3,"mappings":"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","names":["defineComponent","ref","axios","$","TwCitySelector","setup","showDeleteModalRef","data","amount","item","mounted","proxy","refreshmount","table","DataTable","ajax","localStorage","getItem","columnDefs","targets","visible","defaultContent","on","row","parents","document","getElementById","click","editid","methods","onPositiveClick","formData","FormData","append","post","then","res","Status","window","$message","success","Message","reload","onNegativeClick","console","log","get","i","length","checkout","url","form","submit"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/Shopcart.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    購物車商品\n    <div class=\"row\">\n      <table class=\"table table-hover table-bordered\" id=\"example\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>名稱</th>\n            <th>規格</th>\n            <th>單價</th>\n            <th>數量</th>\n\n            <th>操作</th>\n          </tr>\n        </thead>\n        <tbody></tbody>\n      </table>\n    </div>\n    訂單總金額：{{ amount\n    }}<n-card title=\"\">\n        <div role=\"tw-city-selector\" data-bootstrap-style></div>\n\n      <n-button type=\"primary\" v-on:click=\"checkout\"> 前往結賬 </n-button>\n    </n-card>\n  </div>\n  <n-modal\n    v-model:show=\"showDeleteModalRef\"\n    :mask-closable=\"false\"\n    preset=\"dialog\"\n    title=\"確認視窗\"\n    content=\"您確定要刪除嗎?\"\n    positive-text=\"確定刪除\"\n    negative-text=\"取消\"\n    @positive-click=\"onPositiveClick\"\n    @negative-click=\"onNegativeClick\"\n    transform-origin=\"center\"\n  />\n  <n-button\n    id=\"deletebtn\"\n    style=\"display: None\"\n    @click=\"showDeleteModalRef = true\"\n    >123</n-button\n  >\n</template>\n<style>\n.testimonial-group > .row {\n  display: block;\n  overflow-x: auto;\n  white-space: nowrap;\n}\n.testimonial-group > .row > .col-4 {\n  display: inline-block;\n}\n\n.vertical-center {\n  min-height: 100%; /* Fallback for browsers do NOT support vh unit */\n\n  display: flex;\n  align-items: center;\n}\n</style>\n<script>\nimport { defineComponent, ref } from \"vue\";\nimport axios from \"axios\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"jquery/dist/jquery.min.js\";\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport $ from \"jquery\";\nimport TwCitySelector from \"tw-city-selector\"\nexport default defineComponent({\n  setup() {\n    return {\n      showDeleteModalRef: ref(false),\n    };\n  },\n  data() {\n    return {\n      amount: 0,\n      item: \"\",\n    };\n  },\n  mounted() {\n    new TwCitySelector();\n\n    let proxy = this;\n    this.refreshmount();\n    var table = $(\"#example\").DataTable({\n      ajax: \"http://localhost/api/getshopcart/\" + localStorage.getItem(\"id\"),\n      columnDefs: [\n        {\n          targets: [0],\n          visible: false,\n        },\n        {\n          targets: [1],\n        },\n        {\n          targets: [2],\n        },\n\n        {\n          targets: [5],\n          defaultContent: \"<button id='del'>刪除</button>\",\n        },\n      ],\n    });\n    $(\"#example tbody\").on(\"click\", \"button\", function () {\n      var data = table.row($(this).parents(\"tr\")).data();\n      document.getElementById(\"deletebtn\").click();\n      proxy.editid = data[0];\n    });\n  },\n  methods: {\n    onPositiveClick() {\n      const formData = new FormData();\n      formData.append(\"deleteid\", this.editid);\n      axios.post(\"http://localhost/api/delcart\", formData, {}).then((res) => {\n        if (res.data.Status == \"Success\") {\n          window.$message.success(res.data.Message);\n          $(\"#example\").DataTable().ajax.reload();\n          this.refreshmount();\n          this.showDeleteModalRef = false;\n        }\n      });\n    },\n    onNegativeClick() {\n      console.log(this.amount);\n\n      this.showDeleteModalRef = false;\n    },\n    refreshmount() {\n      this.amount = 0;\n      axios\n        .get(\n          \"http://localhost/api/getshopcart/\" + localStorage.getItem(\"id\"),\n          {}\n        )\n        .then((res) => {\n          for (var i = 0; i < res.data.data.length; i++) {\n            this.amount += res.data.data[i][3] * res.data.data[i][4];\n            this.item += res.data.data[i][1] + \"x\" + res.data.data[i][4] + \"#\";\n          }\n        });\n    },\n    checkout() {\n      var url = \"http://localhost/api/pay\";\n      var form = $(\n        '<form style=\"display:none\" action=\"' +\n          url +\n          '\" method=\"post\">' +\n          '<input type=\"text\" name=\"TotalAmount\" value=\"' +\n          this.amount +\n          '\" />' +\n          '<input type=\"text\" name=\"ItemName\" value=\"' +\n          this.item +\n          '\" />' +\n          \"</form>\"\n      );\n\n      $(\"body\").append(form);\n      form.submit();\n    },\n  },\n});\n</script>\n"]}]}