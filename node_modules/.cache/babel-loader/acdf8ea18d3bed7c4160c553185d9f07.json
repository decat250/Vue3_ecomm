{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/Login.vue","mtime":1645780244991},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VNZXNzYWdlIH0gZnJvbSAibmFpdmUtdWkiOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIG5hbWU6ICJoZWFkZXIiLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc2xvZ2luOiBmYWxzZSwKICAgICAgbG9naW5mb3JtVmFsdWU6IHJlZih7CiAgICAgICAgYWNjb3VudDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiCiAgICAgIH0pLAogICAgICBydWxlczogewogICAgICAgIGFjY291bnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLpgJnmmK/lv4XloavmrITkvY0iLAogICAgICAgICAgdHJpZ2dlcjogWyJpbnB1dCIsICJibHVyIl0KICAgICAgICB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIumAmeaYr+W/heWhq+ashOS9jSIsCiAgICAgICAgICB0cmlnZ2VyOiBbImlucHV0IiwgImJsdXIiXQogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIGlzTG9naW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWNjb3VudCIpOwoKICAgIGlmIChpc0xvZ2luICE9IG51bGwpIHsKICAgICAgdGhpcy5pc2xvZ2luID0gdHJ1ZTsKICAgICAgdGhpcy5hY2NvdW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFjY291bnQiKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuaXNsb2dpbiA9IGZhbHNlOwogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgd2luZG93LiRtZXNzYWdlID0gdXNlTWVzc2FnZSgpOwogICAgdmFyIGxvZ2luZm9ybXJlZiA9IHJlZihudWxsKTsgLy/nmbvlhaXooajllq4KCiAgICByZXR1cm4gewogICAgICBsb2dpbmZvcm1yZWY6IGxvZ2luZm9ybXJlZiwKICAgICAgc2hvd0xvZ2luTW9kYWw6IHJlZihmYWxzZSkKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImFjY291bnQiKTsKICAgICAgdGhpcy5pc2xvZ2luID0gZmFsc2U7CiAgICAgIHdpbmRvdy4kbWVzc2FnZS5zdWNjZXNzKCLmgqjlt7Lnmbvlh7oiKTsKICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvZ2luZm9ybXJlZi52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICBmZXRjaCgiaHR0cDovLzEyNy4wLjAuMS9hcGkvc2lnbmluIiwgewogICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIGFjY291bnQ6IF90aGlzLmxvZ2luZm9ybVZhbHVlLmFjY291bnQsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLmxvZ2luZm9ybVZhbHVlLnBhc3N3b3JkCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgIHJldHVybiBkYXRhLmpzb24oKTsKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJldCkgewogICAgICAgICAgICBpZiAocmV0LlN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXQpOwoKICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgcGF0aDogJy9hZG1pbmRleCcKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuc2hvd0xvZ2luTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpcy5pc2xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYWNjb3VudCIsIHJldC5kYXRhWzBdKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWQiLCByZXQuZGF0YVs0XSk7CiAgICAgICAgICAgICAgd2luZG93LiRtZXNzYWdlLnN1Y2Nlc3MocmV0Lk1lc3NhZ2UpOwogICAgICAgICAgICAgIF90aGlzLmxvZ2luZm9ybVZhbHVlLmFjY291bnQgPSAiIjsKICAgICAgICAgICAgICBfdGhpcy5sb2dpbmZvcm1WYWx1ZS5wYXNzd29yZCA9ICIiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHdpbmRvdy4kbWVzc2FnZS5lcnJvcihyZXQuTWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"mappings":"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","names":["defineComponent","ref","useMessage","name","components","data","islogin","loginformValue","account","password","rules","required","message","trigger","mounted","isLogin","localStorage","getItem","setup","window","$message","loginformref","showLoginModal","methods","logout","removeItem","success","login","validate","valid","fetch","method","headers","Accept","body","JSON","stringify","then","json","ret","Status","console","log","$router","push","path","setItem","Message","error"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/adm/Login.vue"],"sourcesContent":["<template>\n  <div class=\"jumbotron vertical-center\">\n    <div class=\"container\">\n      <n-card title=\"管理者登入\">\n        <n-form :model=\"loginformValue\" ref=\"loginformref\" :rules=\"rules\">\n          <n-form-item path=\"account\" label=\"帳號\">\n            <n-input\n              v-model:value=\"loginformValue.account\"\n              placeholder=\"請輸入帳號\"\n              clearable\n            />\n          </n-form-item>\n\n          <n-form-item path=\"password\" label=\"密碼\">\n            <n-input\n              v-model:value=\"loginformValue.password\"\n              placeholder=\"請輸入密碼\"\n              @keyup.enter=\"login\"\n              type=\"password\"\n              clearable\n            />\n          </n-form-item>\n        </n-form>\n        <n-button type=\"primary\" block secondary strong v-on:click=\"login\"\n          >登入\n        </n-button>\n      </n-card>\n    </div>\n  </div>\n</template>\n<script>\nimport { defineComponent, ref } from \"vue\";\nimport { useMessage } from \"naive-ui\";\n\nexport default defineComponent({\n  name: \"header\",\n  components: {},\n  data() {\n    return {\n      islogin: false,\n\n      loginformValue: ref({\n        account: \"\",\n        password: \"\",\n      }),\n\n      rules: {\n        account: [\n          {\n            required: true,\n            message: \"這是必填欄位\",\n            trigger: [\"input\", \"blur\"],\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"這是必填欄位\",\n            trigger: [\"input\", \"blur\"],\n          },\n        ],\n      },\n    };\n  },\n  mounted() {\n    const isLogin = localStorage.getItem(\"account\");\n\n    if (isLogin != null) {\n      this.islogin = true;\n      this.account = localStorage.getItem(\"account\");\n    } else {\n      this.islogin = false;\n    }\n  },\n  setup() {\n    window.$message = useMessage();\n\n    const loginformref = ref(null); //登入表單\n\n    return {\n      loginformref,\n      showLoginModal: ref(false),\n    };\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"account\");\n      this.islogin = false;\n      window.$message.success(\"您已登出\");\n    },\n    login() {\n      this.loginformref.validate((valid) => {\n        if (!valid) {\n          fetch(\"http://127.0.0.1/api/signin\", {\n            method: \"post\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              account: this.loginformValue.account,\n              password: this.loginformValue.password,\n            }),\n          })\n            .then((data) => {\n              return data.json();\n            })\n            .then((ret) => {\n              if (ret.Status == \"Success\") {\n                console.log(ret)\n                this.$router.push({ path: '/admindex'})\n                this.showLoginModal = false;\n                this.islogin = true;\n                localStorage.setItem(\"account\", ret.data[0]);\n                localStorage.setItem(\"id\", ret.data[4]);\n                window.$message.success(ret.Message);\n                this.loginformValue.account = \"\";\n                this.loginformValue.password = \"\";\n              } else {\n                window.$message.error(ret.Message);\n              }\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n  },\n});\n</script>\n\n\n<style scoped>\n.vertical-center {\n  min-height: 100%; /* Fallback for browsers do NOT support vh unit */\n  min-height: 100vh; /* These two lines are counted as one :-)       */\n\n  display: flex;\n  align-items: center;\n}\n</style>"]}]}