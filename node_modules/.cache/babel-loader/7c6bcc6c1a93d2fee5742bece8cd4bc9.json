{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/Login.vue?vue&type=template&id=64b48a0c&scoped=true","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/Login.vue","mtime":1646129253666},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1645696107320},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCB3aXRoS2V5cyBhcyBfd2l0aEtleXMsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoU2NvcGVJZCA9IGZ1bmN0aW9uIF93aXRoU2NvcGVJZChuKSB7CiAgcmV0dXJuIF9wdXNoU2NvcGVJZCgiZGF0YS12LTY0YjQ4YTBjIiksIG4gPSBuKCksIF9wb3BTY29wZUlkKCksIG47Cn07Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImp1bWJvdHJvbiB2ZXJ0aWNhbC1jZW50ZXIiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiY29udGFpbmVyIgp9OwoKdmFyIF9ob2lzdGVkXzMgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgi55m75YWlICIpOwoKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9uX2lucHV0ID0gX3Jlc29sdmVDb21wb25lbnQoIm4taW5wdXQiKTsKCiAgdmFyIF9jb21wb25lbnRfbl9mb3JtX2l0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgibi1mb3JtLWl0ZW0iKTsKCiAgdmFyIF9jb21wb25lbnRfbl9mb3JtID0gX3Jlc29sdmVDb21wb25lbnQoIm4tZm9ybSIpOwoKICB2YXIgX2NvbXBvbmVudF9uX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJuLWJ1dHRvbiIpOwoKICB2YXIgX2NvbXBvbmVudF9uX2NhcmQgPSBfcmVzb2x2ZUNvbXBvbmVudCgibi1jYXJkIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfbl9jYXJkLCB7CiAgICB0aXRsZTogIueuoeeQhuiAheeZu+WFpSIKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfbl9mb3JtLCB7CiAgICAgICAgbW9kZWw6IF9jdHgubG9naW5mb3JtVmFsdWUsCiAgICAgICAgcmVmOiAibG9naW5mb3JtcmVmIiwKICAgICAgICBydWxlczogX2N0eC5ydWxlcwogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9uX2Zvcm1faXRlbSwgewogICAgICAgICAgICBwYXRoOiAiYWNjb3VudCIsCiAgICAgICAgICAgIGxhYmVsOiAi5biz6JmfIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9uX2lucHV0LCB7CiAgICAgICAgICAgICAgICB2YWx1ZTogX2N0eC5sb2dpbmZvcm1WYWx1ZS5hY2NvdW50LAogICAgICAgICAgICAgICAgIm9uVXBkYXRlOnZhbHVlIjogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY3R4LmxvZ2luZm9ybVZhbHVlLmFjY291bnQgPSAkZXZlbnQ7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAi6KuL6Ly45YWl5biz6JmfIiwKICAgICAgICAgICAgICAgIGNsZWFyYWJsZTogIiIKICAgICAgICAgICAgICB9LCBudWxsLCA4CiAgICAgICAgICAgICAgLyogUFJPUFMgKi8KICAgICAgICAgICAgICAsIFsidmFsdWUiXSldOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfbl9mb3JtX2l0ZW0sIHsKICAgICAgICAgICAgcGF0aDogInBhc3N3b3JkIiwKICAgICAgICAgICAgbGFiZWw6ICLlr4bnorwiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X25faW5wdXQsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiBfY3R4LmxvZ2luZm9ybVZhbHVlLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgIm9uVXBkYXRlOnZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY3R4LmxvZ2luZm9ybVZhbHVlLnBhc3N3b3JkID0gJGV2ZW50OwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogIuiri+i8uOWFpeWvhueivCIsCiAgICAgICAgICAgICAgICBvbktleXVwOiBfd2l0aEtleXMoX2N0eC5sb2dpbiwgWyJlbnRlciJdKSwKICAgICAgICAgICAgICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgICAgICAgICBjbGVhcmFibGU6ICIiCiAgICAgICAgICAgICAgfSwgbnVsbCwgOAogICAgICAgICAgICAgIC8qIFBST1BTICovCiAgICAgICAgICAgICAgLCBbInZhbHVlIiwgIm9uS2V5dXAiXSldOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgICAgICB9KV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICAgIC8qIFNUQUJMRSAqLwoKICAgICAgfSwgOAogICAgICAvKiBQUk9QUyAqLwogICAgICAsIFsibW9kZWwiLCAicnVsZXMiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X25fYnV0dG9uLCB7CiAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgIGJsb2NrOiAiIiwKICAgICAgICBzZWNvbmRhcnk6ICIiLAogICAgICAgIHN0cm9uZzogIiIsCiAgICAgICAgb25DbGljazogX2N0eC5sb2dpbgogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF8zXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgICAgLyogU1RBQkxFICovCgogICAgICB9LCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJvbkNsaWNrIl0pXTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0pXSldKTsKfQ=="},{"version":3,"mappings":";;;;;;;AACOA,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;+CAsBJ;;;;;;;;;;;;;uBAvBTC,oBA2BM,KA3BN,cA2BM,CA1BJC,oBAyBM,KAzBN,cAyBM,CAxBJC,aAuBSC,iBAvBT,EAuBS;AAvBDC,SAAK,EAAC;AAuBL,GAvBT,EAAqB;sBACnB;AAAA,aAkBS,CAlBTF,aAkBSG,iBAlBT,EAkBS;AAlBAC,aAAK,EAAEC,mBAkBP;AAlBuBC,WAAG,EAAC,cAkB3B;AAlB2CC,aAAK,EAAEF;AAkBlD,OAlBT;0BACE;AAAA,iBAMc,CANdL,aAMcQ,sBANd,EAMc;AANDC,gBAAI,EAAC,SAMJ;AANcC,iBAAK,EAAC;AAMpB,WANd;8BACE;AAAA,qBAIE,CAJFV,aAIEW,kBAJF,EAIE;AAHQC,qBAAK,EAAEP,oBAAeQ,OAG9B;;yBAHeR,oBAAeQ,UAAOC;kBAGrC;AAFAC,2BAAW,EAAC,OAEZ;AADAC,yBAAS,EAAT;AACA,eAJF;;AAAA,0BAIE,CAJF;AAAA;;;;WADF,CAMc,EAEdhB,aAQcQ,sBARd,EAQc;AARDC,gBAAI,EAAC,UAQJ;AAReC,iBAAK,EAAC;AAQrB,WARd;8BACE;AAAA,qBAME,CANFV,aAMEW,kBANF,EAME;AALQC,qBAAK,EAAEP,oBAAeY,QAK9B;;yBALeZ,oBAAeY,WAAQH;kBAKtC;AAJAC,2BAAW,EAAC,OAIZ;AAHCG,uBAAK,YAAQb,UAAR,EAAa,SAAb,CAGN;AAFAc,oBAAI,EAAC,UAEL;AADAH,yBAAS,EAAT;AACA,eANF;;AAAA,qCAME,CANF;AAAA;;;;WADF,CAFc,CANd;AAAA;;;;OADF;;AAAA,2BAkBS,EACThB,aAEWoB,mBAFX,EAEW;AAFDD,YAAI,EAAC,SAEJ;AAFcE,aAAK,EAAL,EAEd;AAFoBC,iBAAS,EAAT,EAEpB;AAF8BC,cAAM,EAAN,EAE9B;AAF0CC,eAAK,EAAEnB;AAEjD,OAFX;0BACG;AAAA,iBACH,YADG;AAAA;;;;OADH;;AAAA,oBADS,CAlBT;AAAA,MADmB;;;;AAAA,GAArB,CAwBI,CAzBN,CA0BI,CA3BN","names":["class","_createElementBlock","_createElementVNode","_createVNode","_component_n_card","title","_component_n_form","model","_ctx","ref","rules","_component_n_form_item","path","label","_component_n_input","value","account","$event","placeholder","clearable","password","onKeyup","type","_component_n_button","block","secondary","strong","onClick"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/adm/Login.vue"],"sourcesContent":["<template>\n  <div class=\"jumbotron vertical-center\">\n    <div class=\"container\">\n      <n-card title=\"管理者登入\">\n        <n-form :model=\"loginformValue\" ref=\"loginformref\" :rules=\"rules\">\n          <n-form-item path=\"account\" label=\"帳號\">\n            <n-input\n              v-model:value=\"loginformValue.account\"\n              placeholder=\"請輸入帳號\"\n              clearable\n            />\n          </n-form-item>\n\n          <n-form-item path=\"password\" label=\"密碼\">\n            <n-input\n              v-model:value=\"loginformValue.password\"\n              placeholder=\"請輸入密碼\"\n              @keyup.enter=\"login\"\n              type=\"password\"\n              clearable\n            />\n          </n-form-item>\n        </n-form>\n        <n-button type=\"primary\" block secondary strong v-on:click=\"login\"\n          >登入\n        </n-button>\n      </n-card>\n    </div>\n  </div>\n</template>\n<script>\nimport { defineComponent, ref } from \"vue\";\nimport { useMessage } from \"naive-ui\";\n\nexport default defineComponent({\n  name: \"header\",\n  components: {},\n  data() {\n    return {\n      islogin: false,\n\n      loginformValue: ref({\n        account: \"\",\n        password: \"\",\n      }),\n\n      rules: {\n        account: [\n          {\n            required: true,\n            message: \"這是必填欄位\",\n            trigger: [\"input\", \"blur\"],\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"這是必填欄位\",\n            trigger: [\"input\", \"blur\"],\n          },\n        ],\n      },\n    };\n  },\n  mounted() {\n    const isLogin = localStorage.getItem(\"account\");\n\n    if (isLogin != null) {\n      this.islogin = true;\n      this.account = localStorage.getItem(\"account\");\n    } else {\n      this.islogin = false;\n    }\n  },\n  setup() {\n    window.$message = useMessage();\n\n    const loginformref = ref(null); //登入表單\n\n    return {\n      loginformref,\n      showLoginModal: ref(false),\n    };\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"account\");\n      this.islogin = false;\n      window.$message.success(\"您已登出\");\n    },\n    login() {\n      this.loginformref.validate((valid) => {\n        if (!valid) {\n          fetch(\"http://127.0.0.1/api/signin\", {\n            method: \"post\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              account: this.loginformValue.account,\n              password: this.loginformValue.password,\n            }),\n          })\n            .then((data) => {\n              return data.json();\n            })\n            .then((ret) => {\n              if (ret.Status == \"Success\") {\n                console.log(ret)\n                this.$router.push({ path: '/admindex'})\n                this.showLoginModal = false;\n                this.islogin = true;\n                localStorage.setItem(\"account\", ret.data[0]);\n                \n                window.$message.success(ret.Message);\n                this.loginformValue.account = \"\";\n                this.loginformValue.password = \"\";\n              } else {\n                window.$message.error(ret.Message);\n              }\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n  },\n});\n</script>\n\n\n<style scoped>\n.vertical-center {\n  min-height: 100%; /* Fallback for browsers do NOT support vh unit */\n  min-height: 100vh; /* These two lines are counted as one :-)       */\n\n  display: flex;\n  align-items: center;\n}\n</style>"]}]}