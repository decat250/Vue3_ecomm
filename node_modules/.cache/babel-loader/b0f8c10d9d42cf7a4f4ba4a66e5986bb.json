{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/banner.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/banner.vue","mtime":1645449893618},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1644997285751},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1644997287108},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1644997287031},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1644997287108},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1644997290172}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gInZ1ZSI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgY29tcG9uZW50czoge30sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2R1Y3RsaXN0OiBbXSwKICAgICAgcHJldmlldzogIiIsCiAgICAgIGltYWdlX2xpc3Q6IFtdLAogICAgICBwcmV2aWV3X2xpc3Q6IFtdLAogICAgICBiYW5uZXJpbWc6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgZmV0Y2goImh0dHA6Ly8xMjcuMC4wLjEvYXBpL2dldHByb2R1Y3RsaXN0IiwgewogICAgICBtZXRob2Q6ICJnZXQiLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQWNjZXB0OiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBkYXRhLmpzb24oKTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJldCkgewogICAgICBjb25zb2xlLmxvZyhyZXQuYmFubmVyaW1nKTsKICAgICAgX3RoaXMucHJldmlld19saXN0ID0gcmV0LmJhbm5lcmltZzsKICAgICAgX3RoaXMuaW1hZ2VfbGlzdCA9IHJldC5iYW5uZXJpbWc7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRlbGV0ZWltZzogZnVuY3Rpb24gZGVsZXRlaW1nKGluZGV4KSB7CiAgICAgIHRoaXMucHJldmlld19saXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuaW1hZ2VfbGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIHByZXZpZXdNdWx0aUltYWdlOiBmdW5jdGlvbiBwcmV2aWV3TXVsdGlJbWFnZShldmVudCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vdGhpcy5pbWFnZXNBcnJheSA9IGV2ZW50LnRhcmdldC5maWxlczsKICAgICAgdmFyIGlucHV0ID0gZXZlbnQudGFyZ2V0OwogICAgICB2YXIgY291bnQgPSBpbnB1dC5maWxlcy5sZW5ndGg7CiAgICAgIHZhciBpbmRleCA9IDA7CgogICAgICBpZiAoaW5wdXQuZmlsZXMpIHsKICAgICAgICB3aGlsZSAoY291bnQtLSkgewogICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzMi5wcmV2aWV3X2xpc3QucHVzaChlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICB0aGlzLmltYWdlX2xpc3QucHVzaChpbnB1dC5maWxlc1tpbmRleF0pOwogICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbaW5kZXhdKTsKICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbmV3cHJvZHVjdDogZnVuY3Rpb24gbmV3cHJvZHVjdCgpIHsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIHZhciBVUkwgPSAiaHR0cDovL2xvY2FsaG9zdC9zaG9wL2Jhbm5lci9jYXJvdXNlbDEuanBlZyI7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncGljW10nLCBVUkwpOwogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3BlbigiUE9TVCIsICJodHRwOi8vbG9jYWxob3N0L2FwaS91cGxvYWRfZmlsZSIsIHRydWUpOwogICAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSBmYWxzZTsKICAgICAgeGh0dHAuc2VuZChmb3JtRGF0YSk7CiAgICB9CiAgfQp9KTs="},{"version":3,"mappings":";;AA0DA,SAASA,eAAT,QAAgC,KAAhC;AAEA,eAAeA,eAAe,CAAC;AAC7BC,YAAU,EAAE,EADiB;AAG7BC,OAH6B,mBAGrB;AACN,WAAO,EAAP;AACD,GAL4B;AAM7BC,MAN6B,kBAMtB;AACL,WAAO;AACLC,iBAAW,EAAE,EADR;AAELC,aAAO,EAAE,EAFJ;AAGLC,gBAAU,EAAE,EAHP;AAILC,kBAAY,EAAE,EAJT;AAKLC,eAAS,EAAE;AALN,KAAP;AAOD,GAd4B;AAe7BC,SAf6B,qBAenB;AAAA;;AACRC,SAAK,CAAC,qCAAD,EAAwC;AAC3CC,YAAM,EAAE,KADmC;AAE3CC,aAAO,EAAE;AACPC,cAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT;AAFkC,KAAxC,CAAL,CAOGC,IAPH,CAOQ,UAACX,IAAD,EAAU;AACd,aAAOA,IAAI,CAACY,IAAL,EAAP;AACD,KATH,EAUGD,IAVH,CAUQ,UAACE,GAAD,EAAS;AACbC,aAAO,CAACC,GAAR,CAAYF,GAAG,CAACR,SAAhB;AACA,WAAI,CAACD,YAAL,GAAoBS,GAAG,CAACR,SAAxB;AACA,WAAI,CAACF,UAAL,GAAkBU,GAAG,CAACR,SAAtB;AACD,KAdH;AAeD,GA/B4B;AAgC7BW,SAAO,EAAE;AACPC,aADO,qBACGC,KADH,EACU;AACf,WAAKd,YAAL,CAAkBe,MAAlB,CAAyBD,KAAzB,EAAgC,CAAhC;AACA,WAAKf,UAAL,CAAgBgB,MAAhB,CAAuBD,KAAvB,EAA8B,CAA9B;AACD,KAJM;AAKPE,qBAAiB,EAAE,2BAAUC,KAAV,EAAiB;AAAA;;AAClC;AAEA,UAAIC,KAAI,GAAID,KAAK,CAACE,MAAlB;AACA,UAAIC,KAAI,GAAIF,KAAK,CAACG,KAAN,CAAYC,MAAxB;AACA,UAAIR,KAAI,GAAI,CAAZ;;AAEA,UAAII,KAAK,CAACG,KAAV,EAAiB;AACf,eAAOD,KAAK,EAAZ,EAAgB;AACd,cAAIG,MAAK,GAAI,IAAIC,UAAJ,EAAb;;AACAD,gBAAM,CAACE,MAAP,GAAgB,UAACC,CAAD,EAAO;AACrB,kBAAI,CAAC1B,YAAL,CAAkB2B,IAAlB,CAAuBD,CAAC,CAACP,MAAF,CAASS,MAAhC;AACD,WAFD;;AAGA,eAAK7B,UAAL,CAAgB4B,IAAhB,CAAqBT,KAAK,CAACG,KAAN,CAAYP,KAAZ,CAArB;AACAS,gBAAM,CAACM,aAAP,CAAqBX,KAAK,CAACG,KAAN,CAAYP,KAAZ,CAArB;AACAA,eAAK;AACP;AACF;AACD,KAvBM;AAwBPgB,cAxBO,wBAwBM;AACX,UAAIC,QAAO,GAAI,IAAIC,QAAJ,EAAf;AACA,UAAIC,GAAE,GAAI,6CAAV;AAEAF,cAAQ,CAACG,MAAT,CAAgB,OAAhB,EAAyBD,GAAzB;AAEA,UAAIE,KAAI,GAAI,IAAIC,cAAJ,EAAZ;AACAD,WAAK,CAACE,IAAN,CAAW,MAAX,EAAmB,kCAAnB,EAAuD,IAAvD;AACAF,WAAK,CAACG,eAAN,GAAwB,KAAxB;AACAH,WAAK,CAACI,IAAN,CAAWR,QAAX;AACD;AAlCM;AAhCoB,CAAD,CAA9B","names":["defineComponent","components","setup","data","productlist","preview","image_list","preview_list","bannerimg","mounted","fetch","method","headers","Accept","then","json","ret","console","log","methods","deleteimg","index","splice","previewMultiImage","event","input","target","count","files","length","reader","FileReader","onload","e","push","result","readAsDataURL","newproduct","formData","FormData","URL","append","xhttp","XMLHttpRequest","open","withCredentials","send"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/adm/banner.vue"],"sourcesContent":["<template>\n  商品頁banner管理\n\n  <input\n    type=\"file\"\n    accept=\"image/*\"\n    multiple\n    @change=\"previewMultiImage\"\n    class=\"form-control-file\"\n    id=\"my-file\"\n    ref=\"fileInput\"\n    style=\"display: none\"\n  />\n  <n-button type=\"primary\" onclick=\"document.getElementById('my-file').click();\"\n    >瀏覽檔案\n  </n-button>\n\n  <div class=\"container testimonial-group\" style=\"margin-top: 10px\">\n    <div class=\"row text-center\">\n      <div\n        class=\"col-4\"\n        style=\"margin-bottom: 30px\"\n        v-for=\"(item, index) in preview_list\"\n        :key=\"index\"\n      >\n        <img\n          :src=\"item\"\n          class=\"img-fluid\"\n          v-on:click=\"clicking($event)\"\n          style=\"max-width: 100px\"\n        />\n        <br />\n        <n-button type=\"error\" v-on:click=\"deleteimg(index)\"> 刪除 </n-button>\n      </div>\n    </div>\n    <n-button type=\"primary\" @click=\"newproduct()\" block secondary strong\n      >確認修改\n    </n-button>\n  </div>\n</template>\n<style>\n.btn-file input[type=\"file\"] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  min-width: 100%;\n  min-height: 100%;\n  font-size: 100px;\n  text-align: right;\n  filter: alpha(opacity=0);\n  opacity: 0;\n  outline: none;\n  background: white;\n  cursor: inherit;\n  display: block;\n}\n</style>\n<script>\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  components: {},\n\n  setup() {\n    return {};\n  },\n  data() {\n    return {\n      productlist: [],\n      preview: \"\",\n      image_list: [],\n      preview_list: [],\n      bannerimg: [],\n    };\n  },\n  mounted() {\n    fetch(\"http://127.0.0.1/api/getproductlist\", {\n      method: \"get\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((data) => {\n        return data.json();\n      })\n      .then((ret) => {\n        console.log(ret.bannerimg);\n        this.preview_list = ret.bannerimg;\n        this.image_list = ret.bannerimg;\n      });\n  },\n  methods: {\n    deleteimg(index) {\n      this.preview_list.splice(index, 1);\n      this.image_list.splice(index, 1);\n    },\n    previewMultiImage: function (event) {\n      //this.imagesArray = event.target.files;\n\n      var input = event.target;\n      var count = input.files.length;\n      var index = 0;\n\n      if (input.files) {\n        while (count--) {\n          var reader = new FileReader();\n          reader.onload = (e) => {\n            this.preview_list.push(e.target.result);\n          };\n          this.image_list.push(input.files[index]);\n          reader.readAsDataURL(input.files[index]);\n          index++;\n        }\n      }\n    },\n    newproduct() {\n      var formData = new FormData();\n      var URL = \"http://localhost/shop/banner/carousel1.jpeg\";\n      \n      formData.append('pic[]', URL);\n\n      var xhttp = new XMLHttpRequest();\n      xhttp.open(\"POST\", \"http://localhost/api/upload_file\", true);\n      xhttp.withCredentials = false;\n      xhttp.send(formData);\n    },\n  },\n});\n</script>"]}]}