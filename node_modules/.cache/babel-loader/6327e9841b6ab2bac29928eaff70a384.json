{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/orderadm.vue?vue&type=template&id=1166a2fb","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/orderadm.vue","mtime":1648793905724},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1645696107320},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcgfSBmcm9tICJ2dWUiOwp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogInJvdyIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAga2V5OiAwCn07CnZhciBfaG9pc3RlZF8zID0gewogIGtleTogMQp9Owp2YXIgX2hvaXN0ZWRfNCA9IHsKICBrZXk6IDIKfTsKCnZhciBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL19jcmVhdGVUZXh0Vk5vZGUoIiDoqILllq7os4foqIogIik7Cgp2YXIgX2hvaXN0ZWRfNiA9IHsKICBrZXk6IDMKfTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9uX3NlbGVjdCA9IF9yZXNvbHZlQ29tcG9uZW50KCJuLXNlbGVjdCIpOwoKICB2YXIgX2NvbXBvbmVudF9uX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJuLWJ1dHRvbiIpOwoKICB2YXIgX2NvbXBvbmVudF92dWVfZ29vZF90YWJsZSA9IF9yZXNvbHZlQ29tcG9uZW50KCJ2dWUtZ29vZC10YWJsZSIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfdnVlX2dvb2RfdGFibGUsIHsKICAgIHJlZjogIm15LXRhYmxlIiwKICAgICJzZWFyY2gtb3B0aW9ucyI6IHsKICAgICAgZW5hYmxlZDogdHJ1ZQogICAgfSwKICAgIGNvbHVtbnM6IF9jdHguY29sdW1ucywKICAgIHJvd3M6IF9jdHgucm93cywKICAgIHBhZ2luYXRlOiB0cnVlLAogICAgbGluZU51bWJlcnM6IHRydWUsCiAgICBnbG9iYWxTZWFyY2g6IHRydWUsCiAgICAicGFnaW5hdGlvbi1vcHRpb25zIjogewogICAgICBlbmFibGVkOiB0cnVlLAogICAgICBtb2RlOiAncmVjb3JkcycsCiAgICAgIHBlclBhZ2U6IDIwLAogICAgICBwb3NpdGlvbjogJ3RvcCcsCiAgICAgIHBlclBhZ2VEcm9wZG93bjogWzUsIDEwLCAyMF0sCiAgICAgIGRyb3Bkb3duQWxsb3dBbGw6IGZhbHNlLAogICAgICBzZXRDdXJyZW50UGFnZTogMiwKICAgICAganVtcEZpcnN0T3JMYXN0OiB0cnVlLAogICAgICBmaXJzdExhYmVsOiAn56ys5LiA6aCBJywKICAgICAgbGFzdExhYmVsOiAn5pyA5b6M5LiA6aCBJywKICAgICAgbmV4dExhYmVsOiAn5LiL5LiA6aCBJywKICAgICAgcHJldkxhYmVsOiAn5LiK5LiA6aCBJywKICAgICAgcm93c1BlclBhZ2VMYWJlbDogJ+avj+mggemhr+ekuumgheebricsCiAgICAgIG9mTGFiZWw6ICdvZicsCiAgICAgIHBhZ2VMYWJlbDogJ3BhZ2UnLAogICAgICBhbGxMYWJlbDogJ0FsbCcsCiAgICAgIGluZm9GbjogZnVuY3Rpb24gaW5mb0ZuKHBhcmFtcykgewogICAgICAgIHJldHVybiAiXHU3NkVFXHU1MjREXHU5ODAxXHU2NTc4ICIuY29uY2F0KHBhcmFtcy5maXJzdFJlY29yZE9uUGFnZSk7CiAgICAgIH0KICAgIH0sCiAgICBvbk9uU2VsZWN0ZWRSb3dzQ2hhbmdlOiBfY3R4LnNlbGVjdGlvbkNoYW5nZWQsCiAgICAic2VsZWN0LW9wdGlvbnMiOiB7CiAgICAgIGVuYWJsZWQ6IHRydWUKICAgIH0KICB9LCB7CiAgICAidGFibGUtcm93IjogX3dpdGhDdHgoZnVuY3Rpb24gKHByb3BzKSB7CiAgICAgIHJldHVybiBbcHJvcHMuY29sdW1uLmZpZWxkID09ICdvcmRlcl9zdGF0dXMnID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygic3BhbiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9uX3NlbGVjdCwgewogICAgICAgIHZhbHVlOiBwcm9wcy5yb3cuc3RhdHVzLAogICAgICAgICJvblVwZGF0ZTp2YWx1ZSI6IFtmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gcHJvcHMucm93LnN0YXR1cyA9ICRldmVudDsKICAgICAgICB9LCBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX2N0eC5vcmRlcl9zdGF0dXMocHJvcHMucm93Lm9yZGVyX2lkLCBwcm9wcy5yb3cuc3RhdHVzKTsKICAgICAgICB9XSwKICAgICAgICBvcHRpb25zOiBfY3R4LnN0YXR1c19vcHRpb25zCiAgICAgIH0sIG51bGwsIDgKICAgICAgLyogUFJPUFMgKi8KICAgICAgLCBbInZhbHVlIiwgIm9uVXBkYXRlOnZhbHVlIiwgIm9wdGlvbnMiXSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIHByb3BzLmNvbHVtbi5maWVsZCA9PSAnbG9naXN0aWNzJyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soInNwYW4iLCBfaG9pc3RlZF8zLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfbl9zZWxlY3QsIHsKICAgICAgICB2YWx1ZTogcHJvcHMucm93LmxvZ2lzdGljc19zdGF0ZSwKICAgICAgICAib25VcGRhdGU6dmFsdWUiOiBbZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIHByb3BzLnJvdy5sb2dpc3RpY3Nfc3RhdGUgPSAkZXZlbnQ7CiAgICAgICAgfSwgZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF9jdHgubG9naXN0aWNzX3N0YXRlKHByb3BzLnJvdy5vcmRlcl9pZCwgcHJvcHMucm93LmxvZ2lzdGljc19zdGF0ZSk7CiAgICAgICAgfV0sCiAgICAgICAgb3B0aW9uczogX2N0eC5sb2dpc3RpY3Nfc3RhdGVfb3B0aW9ucwogICAgICB9LCBudWxsLCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJ2YWx1ZSIsICJvblVwZGF0ZTp2YWx1ZSIsICJvcHRpb25zIl0pXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpLCBwcm9wcy5jb2x1bW4uZmllbGQgPT0gJ2VkaXQnID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygic3BhbiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9uX2J1dHRvbiwgewogICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF9jdHgucmVkaXJlY3QocHJvcHMucm93Lm9yZGVyX2lkKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19ob2lzdGVkXzVdOwogICAgICAgIH0pLAogICAgICAgIF86IDIKICAgICAgICAvKiBEWU5BTUlDICovCgogICAgICB9LCAxMDMyCiAgICAgIC8qIFBST1BTLCBEWU5BTUlDX1NMT1RTICovCiAgICAgICwgWyJvbkNsaWNrIl0pXSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygic3BhbiIsIF9ob2lzdGVkXzYsIF90b0Rpc3BsYXlTdHJpbmcocHJvcHMuZm9ybWF0dGVkUm93W3Byb3BzLmNvbHVtbi5maWVsZF0pLCAxCiAgICAgIC8qIFRFWFQgKi8KICAgICAgKSldOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSwgOAogIC8qIFBST1BTICovCiAgLCBbImNvbHVtbnMiLCAicm93cyIsICJwYWdpbmF0aW9uLW9wdGlvbnMiLCAib25PblNlbGVjdGVkUm93c0NoYW5nZSJdKV0pOwp9"},{"version":3,"mappings":";;AACOA,OAAK,EAAC;;;;;;;;;;;;+CAmD4D;;;;;;;;;;;;uBAnDvEC,oBA6DM,KA7DN,cA6DM,CA5DJC,aA2DiBC,yBA3DjB,EA2DiB;AA1DfC,OAAG,EAAC,UA0DW;AAzDd,sBAAgB;AAAAC;AAAA,KAyDF;AAxDdC,WAAO,EAAEC,YAwDK;AAvDdC,QAAI,EAAED,SAuDQ;AAtDdE,YAAQ,EAAE,IAsDI;AArDdC,eAAW,EAAE,IAqDC;AApDdC,gBAAY,EAAE,IAoDA;AAnDd,0BAAkB;mBAAA;qBAAA;iBAAA;qBAAA;kCAAA;6BAAA;uBAAA;2BAAA;uBAAA;uBAAA;sBAAA;sBAAA;gCAAA;mBAAA;uBAAA;qBAAA;8BAA6cC;kDAAmBA,MAAM,CAACC;;AAAve,KAmDJ;AAhCdC,0BAAuB,EAAEP,qBAgCX;AA/Bd,sBAAgB;;AAAA;AA+BF,GA3DjB;AAgCa,iBAASQ,SAClB,UADoBC,KACpB;AAAA,aADyB,CACbA,KAAK,CAACC,MAAN,CAAaC,KAAb,IAAkB,gCAA9BjB,oBAMO,MANP,EAMOkB,UANP,EAMO,CALLjB,aAIEkB,mBAJF,EAIE;AAHQC,aAAK,EAAEL,KAAK,CAACM,GAAN,CAAUC,MAGzB;;iBAHeP,KAAK,CAACM,GAAN,CAAUC,SAAMC;WAAA;AAAA,iBAEhBjB,kBAAaS,KAAK,CAACM,GAAN,CAAUG,QAAvB,EAAiCT,KAAK,CAACM,GAAN,CAAUC,MAA3C,CAFgB;AAAA,UAG/B;AAFCG,eAAO,EAAEnB;AAEV,OAJF;;AAAA,+CAKK,CANP,sCADyB,EAQbS,KAAK,CAACC,MAAN,CAAaC,KAAb,IAAkB,6BAA9BjB,oBAQO,MARP,EAQO0B,UARP,EAQO,CAPLzB,aAMEkB,mBANF,EAME;AALQC,aAAK,EAAEL,KAAK,CAACM,GAAN,CAAUM,eAKzB;;iBALeZ,KAAK,CAACM,GAAN,CAAUM,kBAAeJ;WAAA;AAAA,iBAEVjB,qBAAgBS,KAAK,CAACM,GAAN,CAAUG,QAA1B,EAAoCT,KAAK,CAACM,GAAN,CAAUM,eAA9C,CAFU;AAAA,UAKxC;AAJCF,eAAO,EAAEnB;AAIV,OANF;;AAAA,+CAOK,CARP,sCARyB,EAiBbS,KAAK,CAACC,MAAN,CAAaC,KAAb,IAAkB,wBAA9BjB,oBAIO,MAJP,EAIO4B,UAJP,EAIO,CAHL3B,aAEW4B,mBAFX,EAEW;AAFDC,YAAI,EAAC,SAEJ;AAFeC,eAAK;AAAA,iBAAEzB,cAASS,KAAK,CAACM,GAAN,CAAUG,QAAnB,CAAF;AAAA;AAEpB,OAFX;0BAA+D;AAAA,iBAE/D,YAF+D;AAAA;;;;OAA/D;;AAAA,oBAGK,CAJP,oBAMAxB,oBAEO,MAFP,EAEOgC,UAFP,EAEOC,iBADFlB,KAAK,CAACmB,YAAN,CAAmBnB,KAAK,CAACC,MAAN,CAAaC,KAAhC,CACE,CAFP,EAC0C;AAAA;AAD1C,QAvByB,CACzB;AAAA,KADkB;;;;GAhCtB;;AAAA,wEA4DI,CA7DN","names":["class","_createElementBlock","_createVNode","_component_vue_good_table","ref","enabled","columns","_ctx","rows","paginate","lineNumbers","globalSearch","params","firstRecordOnPage","onOnSelectedRowsChange","_withCtx","props","column","field","_hoisted_2","_component_n_select","value","row","status","$event","order_id","options","_hoisted_3","logistics_state","_hoisted_4","_component_n_button","type","onClick","_hoisted_6","_toDisplayString","formattedRow"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/adm/orderadm.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <vue-good-table\n      ref=\"my-table\"\n      :search-options=\"{ enabled: true }\"\n      :columns=\"columns\"\n      :rows=\"rows\"\n      :paginate=\"true\"\n      :lineNumbers=\"true\"\n      :globalSearch=\"true\"\n      :pagination-options=\"{\n        enabled: true,\n        mode: 'records',\n        perPage: 20,\n        position: 'top',\n        perPageDropdown: [5, 10, 20],\n        dropdownAllowAll: false,\n        setCurrentPage: 2,\n        jumpFirstOrLast: true,\n        firstLabel: '第一頁',\n        lastLabel: '最後一頁',\n        nextLabel: '下一頁',\n        prevLabel: '上一頁',\n        rowsPerPageLabel: '每頁顯示項目',\n        ofLabel: 'of',\n        pageLabel: 'page',\n        allLabel: 'All',\n        infoFn: (params) => `目前頁數 ${params.firstRecordOnPage}`,\n      }\"\n      @on-selected-rows-change=\"selectionChanged\"\n      :select-options=\"{\n        enabled: true,\n      }\"\n    >\n      <template #table-row=\"props\">\n        <span v-if=\"props.column.field == 'order_status'\">\n          <n-select\n            v-model:value=\"props.row.status\"\n            :options=\"status_options\"\n            @update:value=\"order_status(props.row.order_id, props.row.status)\"\n          />\n        </span>\n        <span v-if=\"props.column.field == 'logistics'\">\n          <n-select\n            v-model:value=\"props.row.logistics_state\"\n            :options=\"logistics_state_options\"\n            @update:value=\"\n              logistics_state(props.row.order_id, props.row.logistics_state)\n            \"\n          />\n        </span>\n        <span v-if=\"props.column.field == 'edit'\">\n          <n-button type=\"primary\" @click=\"redirect(props.row.order_id)\">\n            訂單資訊\n          </n-button>\n        </span>\n\n        <span v-else>\n          {{ props.formattedRow[props.column.field] }}\n        </span>\n      </template>\n    </vue-good-table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { useMessage } from \"naive-ui\";\n\nimport { defineComponent } from \"vue\";\nimport { VueGoodTable } from \"vue-good-table-next\";\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\n\nexport default defineComponent({\n  components: { VueGoodTable },\n\n  setup() {\n    window.$message = useMessage();\n    return {};\n  },\n  data() {\n    return {\n      columns: [\n        {\n          label: \"訂單日期\",\n          field: \"order_time\",\n          dateInputFormat: \"yyyy-MM-dd'T'HH:mm:ss.SSSSSSXXX\",\n          dateOutputFormat: \"yyyy\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"訂購人姓名\",\n          field: \"user_name\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"總金額\",\n          field: \"order_total\",\n          type: \"number\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"訂單狀態\",\n          field: \"order_status\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"出貨狀態\",\n          field: \"logistics\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n        {\n          label: \"詳細資訊\",\n          field: \"edit\",\n          tdClass: \"text-center\",\n          globalSearchDisabled: true,\n        },\n      ],\n      rows: [],\n      status_options: [\n        { value: \"待付款\", label: \"待付款\" },\n        { value: \"已付款\", label: \"已付款\" },\n      ],\n      logistics_state_options: [\n        { value: \"待出貨\", label: \"待出貨\" },\n        { value: \"已出貨\", label: \"已出貨\" },\n      ],\n    };\n  },\n  mounted() {\n    axios.get(\"http://localhost/api/getorderadm\", {}).then((res) => {\n      this.rows = res.data.data;\n    });\n  },\n  methods: {\n    order_status(id, status) {\n      console.log(id);\n      console.log(status);\n      const formData = new FormData();\n      formData.append(\"order_id\", id);\n      formData.append(\"status\", status);\n\n      axios\n        .post(\"http://localhost/api/orderstatus_update\", formData, {})\n        .then((res) => {\n          if (res.data.Status == \"Success\") {\n            window.$message.success(res.data.Message);\n\n            this.showDeleteModalRef = false;\n          }\n        });\n    },\n    logistics_state(id, status) {\n      const formData = new FormData();\n      formData.append(\"order_id\", id);\n      formData.append(\"status\", status);\n\n      axios\n        .post(\"http://localhost/api/logistics_update\", formData, {})\n        .then((res) => {\n          if (res.data.Status == \"Success\") {\n            window.$message.success(res.data.Message);\n\n            this.showDeleteModalRef = false;\n          }\n        });\n    },\n    redirect(id) {\n      this.$router.push({ path: \"/admindex/order_itemadm/\" + id });\n    },\n  },\n});\n</script>"]}]}