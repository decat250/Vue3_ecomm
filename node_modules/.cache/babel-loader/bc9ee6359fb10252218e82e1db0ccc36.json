{"remainingRequest":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js!/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/decat/Vue3_ecomm/src/views/adm/banner.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/decat/Vue3_ecomm/src/views/adm/banner.vue","mtime":1647705963885},{"path":"/Users/decat/Vue3_ecomm/babel.config.js","mtime":1645696101737},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/babel-loader/lib/index.js","mtime":1645696104065},{"path":"/Users/decat/Vue3_ecomm/node_modules/cache-loader/dist/cjs.js","mtime":1645696104150},{"path":"/Users/decat/Vue3_ecomm/node_modules/vue-loader-v16/dist/index.js","mtime":1645696107319}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gInZ1ZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgY29tcG9uZW50czoge30sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2R1Y3RsaXN0OiBbXSwKICAgICAgcHJldmlldzogIiIsCiAgICAgIGltYWdlX2xpc3Q6IFtdLAogICAgICBwcmV2aWV3X2xpc3Q6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgZmV0Y2goImh0dHA6Ly8xMjcuMC4wLjEvYXBpL2dldHByb2R1Y3RsaXN0L251bGwiLCB7CiAgICAgIG1ldGhvZDogImdldCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBY2NlcHQ6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgcmV0dXJuIGRhdGEuanNvbigpOwogICAgfSkudGhlbihmdW5jdGlvbiAocmV0KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0LmJhbm5lcmltZy5sZW5ndGg7IGkrKykgewogICAgICAgIF90aGlzLmdldGZpbGVpbWcocmV0LmJhbm5lcmltZ1tpXS5pdGVtKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRmaWxlaW1nOiBmdW5jdGlvbiBnZXRmaWxlaW1nKHVybCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGZldGNoKHVybCwgewogICAgICAgIG1vZGU6ICJjb3JzIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gcmVzLmJsb2IoKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoYmxvYikgewogICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCAidXJsLmpwZyIsIHsKICAgICAgICAgIHR5cGU6ICJpbWFnZS9wbmciCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi5pbWFnZV9saXN0LnB1c2goZmlsZSk7CgogICAgICAgIHZhciBmciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgIGZyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBfdGhpczIucHJldmlld19saXN0LnB1c2goZS50YXJnZXQucmVzdWx0KTsKICAgICAgICB9OwoKICAgICAgICBmci5yZWFkQXNEYXRhVVJMKGJsb2IpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVpbWc6IGZ1bmN0aW9uIGRlbGV0ZWltZyhpbmRleCkgewogICAgICBjb25zb2xlLmxvZyhpbmRleCk7CiAgICAgIHRoaXMucHJldmlld19saXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuaW1hZ2VfbGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIHByZXZpZXdNdWx0aUltYWdlOiBmdW5jdGlvbiBwcmV2aWV3TXVsdGlJbWFnZShldmVudCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vdGhpcy5pbWFnZXNBcnJheSA9IGV2ZW50LnRhcmdldC5maWxlczsKICAgICAgdmFyIGlucHV0ID0gZXZlbnQudGFyZ2V0OwogICAgICB2YXIgY291bnQgPSBpbnB1dC5maWxlcy5sZW5ndGg7CiAgICAgIHZhciBpbmRleCA9IDA7CgogICAgICBpZiAoaW5wdXQuZmlsZXMpIHsKICAgICAgICB3aGlsZSAoY291bnQtLSkgewogICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzMy5wcmV2aWV3X2xpc3QucHVzaChlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICB0aGlzLmltYWdlX2xpc3QucHVzaChpbnB1dC5maWxlc1tpbmRleF0pOwogICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbaW5kZXhdKTsKICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbmV3cHJvZHVjdDogZnVuY3Rpb24gbmV3cHJvZHVjdCgpIHsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW1hZ2VfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZVtdIiwgdGhpcy5pbWFnZV9saXN0W2ldKTsKICAgICAgfQoKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdC9hcGkvYmFubmVyaW5nIiwgZm9ybURhdGEsIHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5TdGF0dXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuU3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgd2luZG93LiRtZXNzYWdlLnN1Y2Nlc3MoIuizh+aWmeS/ruaUueWujOaIkCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aW5kb3cuJG1lc3NhZ2UuZXJyb3IocmVzLk1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9KTs="},{"version":3,"mappings":"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","names":["defineComponent","axios","components","setup","data","productlist","preview","image_list","preview_list","mounted","fetch","method","headers","Accept","then","json","ret","i","bannerimg","length","getfileimg","item","methods","url","mode","res","blob","file","File","type","push","fr","FileReader","onload","e","target","result","readAsDataURL","deleteimg","index","console","log","splice","previewMultiImage","event","input","count","files","reader","newproduct","formData","FormData","append","post","Status","window","$message","success","error","Message"],"sourceRoot":"","sources":["/Users/decat/Vue3_ecomm/src/views/adm/banner.vue"],"sourcesContent":["<template>\n  商品頁banner管理\n\n  <input\n    type=\"file\"\n    accept=\"image/*\"\n    multiple\n    @change=\"previewMultiImage\"\n    class=\"form-control-file\"\n    id=\"my-file\"\n    ref=\"fileInput\"\n    style=\"display: none\"\n  />\n  <n-button type=\"primary\" onclick=\"document.getElementById('my-file').click();\"\n    >瀏覽檔案\n  </n-button>\n\n  <div class=\"container testimonial-group\" style=\"margin-top: 10px\">\n    <div class=\"row text-center\">\n      <div\n        class=\"col-4\"\n        style=\"margin-bottom: 30px\"\n        v-for=\"(item, index) in preview_list\"\n        :key=\"index\"\n      >\n        <img\n          :src=\"item\"\n          class=\"img-fluid\"\n          v-on:click=\"clicking($event)\"\n          style=\"max-width: 100px\"\n        />\n        <br />\n        <n-button type=\"error\" v-on:click=\"deleteimg(index)\"> 刪除 </n-button>\n      </div>\n    </div>\n    <n-button type=\"primary\" @click=\"newproduct()\" block secondary strong\n      >確認修改\n    </n-button>\n  </div>\n</template>\n<style>\n.btn-file input[type=\"file\"] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  min-width: 100%;\n  min-height: 100%;\n  font-size: 100px;\n  text-align: right;\n  filter: alpha(opacity=0);\n  opacity: 0;\n  outline: none;\n  background: white;\n  cursor: inherit;\n  display: block;\n}\n</style>\n<script>\nimport { defineComponent } from \"vue\";\nimport axios from \"axios\";\nexport default defineComponent({\n  components: {},\n\n  setup() {\n    return {};\n  },\n  data() {\n    return {\n      productlist: [],\n      preview: \"\",\n      image_list: [],\n      preview_list: [],\n    };\n  },\n  mounted() {\n    fetch(\"http://127.0.0.1/api/getproductlist/null\", {\n      method: \"get\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((data) => {\n        return data.json();\n      })\n      .then((ret) => {\n        for (var i = 0; i < ret.bannerimg.length; i++) {\n          this.getfileimg(ret.bannerimg[i].item);\n        }\n      });\n  },\n  methods: {\n    getfileimg(url) {\n      fetch(url, { mode: \"cors\" })\n        .then((res) => res.blob())\n        .then((blob) => {\n          const file = new File([blob], \"url.jpg\", { type: \"image/png\" });\n          this.image_list.push(file);\n\n          var fr = new FileReader();\n          fr.onload = (e) => {\n            this.preview_list.push(e.target.result);\n          };\n          fr.readAsDataURL(blob);\n        });\n    },\n\n    deleteimg(index) {\n      console.log(index);\n      this.preview_list.splice(index, 1);\n      this.image_list.splice(index, 1);\n    },\n    previewMultiImage: function (event) {\n      //this.imagesArray = event.target.files;\n      var input = event.target;\n      var count = input.files.length;\n      var index = 0;\n      if (input.files) {\n        while (count--) {\n          var reader = new FileReader();\n          reader.onload = (e) => {\n            this.preview_list.push(e.target.result);\n          };\n          this.image_list.push(input.files[index]);\n          reader.readAsDataURL(input.files[index]);\n          index++;\n        }\n      }\n    },\n    newproduct() {\n\n      const formData = new FormData();\n\n      for (var i = 0; i < this.image_list.length; i++) {\n        formData.append(\"file[]\", this.image_list[i]);\n      }\n\n      axios.post(\"http://localhost/api/bannering\", formData, {}).then((res) => {\n        console.log(res.data.Status)\n        if (res.data.Status == \"Success\") {      \n          window.$message.success(\"資料修改完成\");\n        } else {\n          window.$message.error(res.Message);\n        }\n      });\n    },\n  },\n});\n</script>"]}]}